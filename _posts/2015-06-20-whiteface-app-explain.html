---
layout: post
title: "วิธีการทำงานของแอปคุณหน้าขาวแค่ไหน"
date: '2015-06-20T17:24:00.000+07:00'
author: Pakkapon Phongthawee
tags:
- announcement
modified_time: '2015-09-27T19:28:12.199+07:00'
thumbnail: https://1.bp.blogspot.com/-QGS53DJuAeE/VYUrAXggd0I/AAAAAAAAZfk/vcM-mu4s3W8/s1600/how-it-work.png
blogger_id: tag:blogger.com,1999:blog-3103072889085475591.post-3353252944290626642
blogger_orig_url: http://www.pureapp.in.th/2015/06/whiteface-app-explain.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-QGS53DJuAeE/VYUrAXggd0I/AAAAAAAAZfk/vcM-mu4s3W8/s1600/how-it-work.png" imageanchor="1"><img border="0" src="https://1.bp.blogspot.com/-QGS53DJuAeE/VYUrAXggd0I/AAAAAAAAZfk/vcM-mu4s3W8/s640/how-it-work.png" /></a></div><br /><div style="text-align: center;"><br /></div><div style="text-align: center;">ก่อนอื่นแอปจะหาหน้าของคุณบนรูปภาพ</div><div style="text-align: center;">ด้วยข้อจำกัดหลายๆอย่าง แอปอาจตรวจไม่พบหน้าของทุกคนในภาพ</div><div style="text-align: center;">ควรหันหน้าตรงเพื่อง่ายต่อการตรวจจับ </div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ffh2GZ7Su8M/VYUtPwu9zhI/AAAAAAAAZfw/BEMAf1-GiAc/s1600/detect-face.png" imageanchor="1" ><img border="0" height="302" src="https://1.bp.blogspot.com/-ffh2GZ7Su8M/VYUtPwu9zhI/AAAAAAAAZfw/BEMAf1-GiAc/s400/detect-face.png" width="400" />&nbsp;</a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div style="text-align: center;">เมื่อเจอภาพแล้วหน้าแล้ว จะดึงพื้นที่ประมาณ 10% กลางหน้าออกมา</div><div style="text-align: center;">จะได้จุดสีบริเวณจุดสีฟ้ากลางภาพแบบด้านล่าง</div><div style="text-align: center;">(เป็นภาพจำลองอาจไม่เท่าสัดส่วนที่แอปทำ) </div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-gpuobpjY6Yk/VYUupk0ZZ7I/AAAAAAAAZf8/RXQcWvuwDR4/s1600/%25E0%25B8%2581%25E0%25B8%25A5%25E0%25B8%25B2%25E0%25B8%2587.png" imageanchor="1" ><img border="0" src="https://4.bp.blogspot.com/-gpuobpjY6Yk/VYUupk0ZZ7I/AAAAAAAAZf8/RXQcWvuwDR4/s1600/%25E0%25B8%2581%25E0%25B8%25A5%25E0%25B8%25B2%25E0%25B8%2587.png" /></a></div><br /><div style="text-align: center;">จากนั้นแอปจะเรียกทุก pixel ในบริเวณที่เลือกออกมา</div><div style="text-align: center;">แบ่งสีเป็น แดง เขียว น้ำเงิน จากนั้นแอปจะหาค่าเฉลี่ยของสีแต่ละสี</div><div style="text-align: center;">โดยเอาค่าสีในแต่ละ pixel บวกกันแล้วหารด้วยจำนวนพิกเซลทั้งหมด</div><div style="text-align: center;"><br /></div><div style="text-align: center;">จากนั้นแอปหาค่าความขาวผ่านทาง Relative Luminance ดังสมการ</div><div style="text-align: center;"><br /></div><div style="text-align: center;">Y = 0.2126 R + 0.7152 G + 0.0722 B&nbsp;</div><div style="text-align: center;"><br /></div><div style="text-align: center;">เมื่อ Y คือ ค่าความสว่าง (Relative Luminance)</div><div style="text-align: center;">R คือค่าเฉลี่ยของ Pixel สีแดง</div><div style="text-align: center;">G คือค่าเฉลี่ยของ Pixel สีเขียว</div><div style="text-align: center;">B คือค่าเฉลี่ยของ Pixel สีน้ำเงิน</div><div style="text-align: center;">&nbsp;(อ้างอิง <a href="https://en.wikipedia.org/wiki/Relative_luminance">https://en.wikipedia.org/wiki/Relative_luminance</a>)</div><div style="text-align: center;"><br /></div><div style="text-align: center;">จากนั้นหารด้วย 255 แล้วคูณร้อยเพื่อแปลงเป็นเปอร์เซ็นต์<br />(สี RGB ของคอม มีค่าอยู่ที่ 0 - 255)</div><div style="text-align: center;"><br /></div><div style="text-align: center;">เท่านี้เราก็จะได้เลขเปอร์เซ็นต์ความขาวแล้ว</div><div style="text-align: center;"><br /></div><div style="text-align: center;">โดยชื่อคำเรียกของสีแต่ละสี ตามการเรียกของ Fitzpatrick&nbsp; ดังนี้</div><div style="text-align: center;"><a href="http://1.bp.blogspot.com/-IJR_goN44LU/VYUyhYM4a3I/AAAAAAAAZgI/L6Rbp3MXh3Y/s1600/fitzpatrick.png" imageanchor="1" ><img border="0" height="232" src="https://1.bp.blogspot.com/-IJR_goN44LU/VYUyhYM4a3I/AAAAAAAAZgI/L6Rbp3MXh3Y/s640/fitzpatrick.png" width="640" /></a><br />(อ้างอิง <a href="https://en.wikipedia.org/wiki/Human_skin_color">https://en.wikipedia.org/wiki/Human_skin_color</a>) </div><div style="text-align: center;"><br /></div><div style="text-align: center;">โดยแยกเป็น 6 สีได้แก่&nbsp; ขาวซีด,ขาว,ชา,มะกอก,น้ำตาลและดำ</div><div style="text-align: center;"><br /></div><div style="text-align: center;">โดย Fitzpatrick ได้แบ่งคำเรียกออกตามสเกลของ Von Luschan</div><div style="text-align: center;">ซึ่งสเกลของ Von Luschan มีดังนี้</div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-hVJZOmB4jzk/VYUzizqHbVI/AAAAAAAAZgQ/m3VksujpzFo/s1600/401px-Felix_von_Luschan_Skin_Color_chart.svg.png"><img border="0" height="216" src="https://3.bp.blogspot.com/-hVJZOmB4jzk/VYUzizqHbVI/AAAAAAAAZgQ/m3VksujpzFo/s320/401px-Felix_von_Luschan_Skin_Color_chart.svg.png" width="320" /></a></div><div style="text-align: center;">(อ้างอิง <a href="https://en.wikipedia.org/wiki/Von_Luschan's_chromatic_scale">https://en.wikipedia.org/wiki/Von_Luschan's_chromatic_scale</a>)</div><div style="text-align: center;"><br /></div><div style="text-align: center;">โดยเราหา Relative Luminance ที่ต่ำสุดของแต่ละช่วงสีจึงได้ค่าประมาณออกมาว่า</div><div style="text-align: center;"><br /></div><div style="text-align: center;">มากกว่า 96% เป็นสีขาวซีด</div><div style="text-align: center;">มากกว่า 92% เป็นสีขาว</div><div style="text-align: center;">มากกว่า&nbsp; 90% เป็นสีชา</div><div style="text-align: center;">มากกว่า 76%&nbsp; เป็นสีมะกอก</div><div style="text-align: center;">มากกว่า 38% เป็นสีน้ำตาล</div><div style="text-align: center;">ต่ำกว่า 38% เป็นสีดำ</div><div style="text-align: center;"><br /></div><div style="text-align: center;"><br />ขออธิบายเพิ่มเติมว่าทำไมใช้ในมือถือแล้วค้าง<br />หลายๆท่านคงเคยเล่นแอป How-Old แล้วไม่เห็นค้าง</div><div style="text-align: center;">เพราะว่าสถานที่ในการประมวลผลมันต่างกันครับ</div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ZE1tt6q4n5A/VYU5ka2Y3fI/AAAAAAAAZgg/qRAM0CN2Y0Y/s1600/azure.png" imageanchor="1"><img border="0" height="187" src="https://1.bp.blogspot.com/-ZE1tt6q4n5A/VYU5ka2Y3fI/AAAAAAAAZgg/qRAM0CN2Y0Y/s400/azure.png" width="400" /></a></div><div style="text-align: center;">How-old นั้นจะส่งรูปไปประมวลผลที่เซิฟเวอร์ของ Azure&nbsp;</div><div style="text-align: center;">ทำให้อุปกรณ์เพียงรอคำตอบจาก Azure เท่านั้น</div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-mtZin8c-Uy0/VYU51Zq5bRI/AAAAAAAAZgo/hXbUbKUOAB4/s1600/pure_app.png" imageanchor="1"><img border="0" height="187" src="https://3.bp.blogspot.com/-mtZin8c-Uy0/VYU51Zq5bRI/AAAAAAAAZgo/hXbUbKUOAB4/s400/pure_app.png" width="400" /></a></div><div style="text-align: center;">แต่ Pure's app จะดึงโค้ดมาประมวลผลที่เครื่องของผู้ใช้<br />ทำให้เครื่องที่มีความสามารถในการประมวลผลต่ำกระตุกและค้างได้ครับ</div><div style="text-align: center;"><br /></div><div style="text-align: center;"><br /></div><div style="text-align: center;"><br /></div><div style="text-align: center;">ทั้งนี้ผมไม่มีความประสงค์ให้เหยียดสีผิวแต่ประการใด<br />แอปนี้สร้างขึ้นเพื่อความสนุกเท่านั้น</div><div style="text-align: center;"><br /></div><div style="text-align: center;">หากสนใจ สามารถอ่านที่มาของแอปนี้ต่อได้<a href="http://www.pureapp.in.th/2015/06/whiteface-app-intro.html" target="_blank">ที่นี่</a></div>
