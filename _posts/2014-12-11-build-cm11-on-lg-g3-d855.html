---
layout: post
title: Build CM11 on LG G3 D855 ด้วยตัวเอง
date: '2014-12-11T22:58:00.000+07:00'
author: Pakkapon Phongthawee
tags:
- "สอน"
- android
modified_time: '2015-09-27T19:20:08.227+07:00'
blogger_id: tag:blogger.com,1999:blog-3103072889085475591.post-8217181441944441382
blogger_orig_url: http://www.pureapp.in.th/2014/12/build-cm11-on-lg-g3-d855.html
---

อย่างที่รู้กันว่าจนแล้วจนรอด CM ก็ยังไม่ยอมรับ D855 เข้าเป็น Official Build ดังนั้น ท่านที่ใช้เครื่อง LG G3 ที่เป็น D855 (ผมก็เป็นหนึ่งในนั้น) ไม่ต้องเสียใจที่จะไม่ได้ใช้ CM เรามาเริ่ม build ใช้กันเองเลยดีกว่าครับ<br /><br />เริิ่มจากสิ่งที่ต้องการ ท่านต้องใช Linux ในการ build ครับ ซึ่งตอนที่ build นี้ผมใช้ Ubuntu 14.04 ครับ<br /><br />จากนั้นเราทำการเปิด Terminal ของ Linux ขึ้นมา (กด ctrl+alt+t)<br /><br />สร้างโฟลเดอร์ใหม่สำหรับเก็บโค้ดของ CM11 ด้วยคำสั่ง<br /><br /><br /><div style="-webkit-text-stroke-width: 0px; background-color: white; border: 0px; box-sizing: border-box; color: #656e7f; font-family: 'PT Serif', 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 18px; font-style: normal; font-variant: normal; font-weight: 300; letter-spacing: normal; line-height: 27px; margin: 0px; orphans: auto; outline: 0px; padding: 0px; text-align: center; text-indent: 0px; text-transform: none; vertical-align: baseline; white-space: normal; widows: auto; word-spacing: 0px;"></div><br /><pre class=" language-html" data-number="" style="-webkit-text-stroke-width: 0px; background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; display: block; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; font-style: normal; font-variant: normal; font-weight: 300; letter-spacing: normal; line-height: 19px; margin: -2px 0px 20px; max-width: 100%; orphans: auto; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-align: left; text-indent: 0px; text-shadow: none; text-transform: none; vertical-align: baseline; widows: auto; word-break: normal; word-spacing: 0px; word-wrap: break-word;">mkdir cm11</pre>ต่อไปทำการติดตั้งซอฟแวร์ที่ต้องใช้ในการ build ด้วยคำสั่ง<br /><br /><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;"><pre class="alt2 " dir="ltr" style="background: rgb(249, 249, 249); border: 1px inset; color: #454545; height: 130px; line-height: normal; max-width: 500px; overflow: auto; padding: 5px; width: 500px;">sudo apt-get install bison build-essential curl flex \<br />g++-multilib gcc-multilib git-core gnupg gperf \<br />lib32ncurses5-dev lib32readline-gplv2-dev lib32z1-dev \<br />libesd0-dev libncurses5-dev libsdl1.2-dev \<br />libwxgtk2.8-dev libxml2 libxml2-utils lzop \<br />openjdk-6-jdk openjdk-6-jre pngcrush schedtool \<br />squashfs-tools xsltproc zip zlib1g-dev</pre></pre><div>ระบบจะถามพาสเวิร์ดในการติดตั้ง ไฟล์ไม่ต้องแปลกใจนะครับ กรอกพาสเวิร์ดแล้วนั่งรอเลย</div><div><br /></div><div>จากนั้นเราย้ายตัวเราเข้าไปในโฟลเดอร์ cm11 ด้วยคำสั่ง</div><div><br /><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;">cd cm11</pre></div><div>หลังจากนั้นทำการติดตั้ง repo ด้วยคำสั่ง</div><br /><div><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;"><pre class="alt2 " dir="ltr" style="background: rgb(249, 249, 249); border: 1px inset; color: #454545; height: 98px; line-height: normal; max-width: 500px; overflow: auto; padding: 5px; width: 500px;"> mkdir ~/bin<br /><br /> PATH=~/<span class="searchBubble" id="searchBubble" style="max-height: 999999em;"></span>bin:$PATH<br /><br /> cd ~/bin<br /><br /> curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo<br /><br /> chmod a+x ~/bin/repo</pre></pre></div></div><div>ระบุตำแหน่งของ CM11 บนระบบ git ด้วยคำสั่ง</div><div><br /><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;"><pre class="alt2 " dir="ltr" style="background: rgb(249, 249, 249); border: 1px inset; color: #454545; height: 34px; line-height: normal; max-width: 500px; overflow: auto; padding: 5px; width: 500px;">repo init -u git://github.com/CyanogenMod/android.git -b cm-11.0</pre></pre></div><div>ดาวน์โหลดโค้ดจากระบบ git ด้วยคำสั่ง</div><div>&nbsp;(ขั้นตอนนี้อาจใช้เวลาประมาณ 12 ชม. แนะนำให้นอนสักงีบครับ)</div><div><br /></div><div><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;">repo sync</pre></div></div><div>พอเสร็จ เข้ามาที่ โฟลเดอร์ cm11 ผ่าน file manager จะเห็นโฟล์เดอร์ขึ้นมาเต็ม ให้กด ctrl+h จะเห็นโฟลเดอร์โผล่ขึ้นมาชื่อ .repo ให้เข้าไปในโฟลเดอร์ .repo สร้างโฟลเดอร์ชื่อ&nbsp;local_manifests ในโฟลเดอร์&nbsp;local_manifests สร้างไฟล์ชื่อ&nbsp;local_manifest.xml แล้วเพิ่มบรรทัดใน&nbsp;local_manifest.xml ตามนี้</div><br /><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; direction: ltr; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;"><pre class="alt2 " dir="ltr" style="background-attachment: initial; background-clip: initial; background-color: #f9f9f9; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; border: 1px inset; height: 98px; max-width: 500px; overflow: auto; padding: 5px; width: 500px;"><span style="color: #454545;"><span style="font-size: 14.6666669845581px;">&lt;manifest&gt;<br />  &lt;!-- D855 --&gt;<br />  &lt;project path="device/lge/d855" name="invisiblek/android_device_lge_d855" remote="github" revision="cm-11.0" /&gt;<br />  &lt;project path="device/lge/g3-common" name="invisiblek/android_device_lge_g3-common" remote="github" revision="cm-11.0" /&gt;<br />  &lt;project path="kernel/lge/g3" name="invisiblek/android_kernel_lge_g3" remote="github" revision="cm-11.0" /&gt;<br />  &lt;project path="vendor/lge" name="invisiblek/proprietary_vendor_lge" remote="github" revision="cm-11.0" /&gt;<br />  &lt;!-- CyanogenMod --&gt;<br />  &lt;project path="device/qcom/common" name="CyanogenMod/android_device_qcom_common" remote="github" revision="cm-11.0" /&gt;  <br />  &lt;project path="hardware/qcom/display-caf-new" name="CyanogenMod/android_hardware_qcom_display-caf-new" remote="github" revision="cm-11.0" /&gt;<br />  &lt;project path="hardware/qcom/media-caf-new" name="CyanogenMod/android_hardware_qcom_media-caf-new" remote="github" revision="cm-11.0" /&gt;<br />&lt;/manifest&gt;</span></span></pre><div style="color: #4d4e53; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px;"></div></pre></div><div>ดาวน์โหลดโค้ดเพิ่มเติมอีกรอบ (ขั้นตอนนี้อาจใช้เวลาประมาณ 2 ชม. เร็วกว่าเดิม)</div><div><br /></div><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;">repo sync</pre></div>จากนั้นทำการ prebuilt ระบบบางส่วนด้วยการสั่ง<br /><br /><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; direction: ltr; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;"><span style="color: #4d4e53; font-family: Consolas, Monaco, Andale Mono, monospace;"><span style="font-size: 14px; line-height: 19px;">cd </span></span><span style="background-color: #f9f9f9;"><span style="color: #454545; font-family: Consolas, Monaco, Andale Mono, monospace;"><span style="font-size: 14px; line-height: 19px;">vendor/cm<br /></span><span style="font-size: 14.6666669845581px; line-height: 19px;">. get-prebuilts<br /></span><span style="font-size: 14px; line-height: 19px;">croot<br />cd ..<br />cd ..</span></span></span></pre></div><div>หลังจากนั้นเราก็เริ่ม build ได้แล้วด้วยคำสั่ง<br />(ขั้นตอนนี้ใช้เวลาประมาณ 3 ชม.)</div><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;">. build/envsetup.sh<br />breakfast d855<br />brunch d855</pre></div><div>หลังจากเสร็จเราจะพบไฟล์zip สำหรับ flash อยู่ที่<br />/cm11/out/target/product/d855<br />โหลด ไฟล์ open_bump ได้จากที่นี่&nbsp;<a href="https://github.com/CyboLabs/Open_Bump">https://github.com/CyboLabs/Open_Bump</a></div><div>ให้ทำการแกะ boot.img ใน zip ออกมา แล้วนำ open_bump.py ที่ได้มาวางในโฟลเดอร์เดียวกัน แล้วสั่ง python open_bump boot.img</div><div><br /></div><div><div><pre class=" language-html" data-number="" style="background: url(https://developer.cdn.mozilla.net/media/redesign/img/blueprint-dark.png) 50% 0% rgb(250, 251, 252); border-left-color: rgb(85, 138, 187); border-left-style: solid; border-radius: 4px; border-width: 0px 0px 0px 6px; box-sizing: border-box; color: #4d4e53; direction: ltr; font-family: Consolas, Monaco, 'Andale Mono', monospace; font-size: 14px; line-height: 19px; margin-bottom: 20px; margin-top: -2px; max-width: 100%; outline: 0px; overflow: auto; padding: 1em 0px 1em 30px; position: relative; tab-size: 4; text-shadow: none; vertical-align: baseline; word-break: normal; word-wrap: break-word;"><span style="color: black; font-family: 'Times New Roman'; font-size: small; line-height: normal; white-space: normal;">&nbsp;python open_bump boot.img</span></pre></div><div>จะมีไฟล์ชื่อ boot_bumped.img ออกมา ให้เปลี่ยนชื่อกลับเป็น boot.img แล้วยัดกลับใส่ในไฟล์ zip ของ CM11 ที่จะเอาไปแฟลช<br /><br />แค่นี้เราก็จะ build rom สำหรับ CM11 ของ LG G3 D855 ใช้เองได้แล้ว ขอให้สนุกครับ<br />// ถ้าว่างๆจะมาใส่รูปเพิ่มอธิบายประกอบ</div></div><br /><br /><br /><br /><br /><br /><br />