---
layout: post
title: "สอนเขียนแอปเฟสบุ๊คบนบล็อก : รู้จัก Graph API ระบบเรียกข้อมูลอันแสนซับซ้อนของเฟสบุ๊ค"
date: '2014-09-07T08:46:00.000+07:00'
author: Pakkapon Phongthawee
tags:
- "สอน"
modified_time: '2015-09-27T19:35:54.064+07:00'
thumbnail: https://3.bp.blogspot.com/-njDIrWIFiPQ/VDtgLJkDDvI/AAAAAAAASco/KjkvSAp7yg0/s72-c/Open_Graph_protocol_logo.png
blogger_id: tag:blogger.com,1999:blog-3103072889085475591.post-1890462413033323380
blogger_orig_url: http://www.pureapp.in.th/2014/09/graph-api.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-njDIrWIFiPQ/VDtgLJkDDvI/AAAAAAAASco/KjkvSAp7yg0/s1600/Open_Graph_protocol_logo.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://3.bp.blogspot.com/-njDIrWIFiPQ/VDtgLJkDDvI/AAAAAAAASco/KjkvSAp7yg0/s1600/Open_Graph_protocol_logo.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">ต่อไปนี้ครับผมจะพูดให้ท่านรู้จักกับ Graph API มันคือหนทางที่ท่านจะใช้เรียกข้อมูลจากเฟสบุ๊ค ผมจะอธิบายเกี่ยวกับ Graph API อย่างง่ายๆ มันอาจไม่ถูกกับหลักวิชาการมากนัก แต่อ่านแล้วเข้าใจง่ายรับรองว่าเหมาะสำหรับคนที่ต้องการเขียนแอปแต่ไม่อยากหาความรู้ครอบจักรวาล</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">ก่อนอื่นมาทำความเข้าใจกับคำว่า Graph ในที่นี้กันก่อนครับ</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/6n-graf.svg/333px-6n-graf.svg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="211" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/6n-graf.svg/333px-6n-graf.svg.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">ขออนุญาตแปลบทความจาก&nbsp;https://en.wikipedia.org/wiki/Graph_theory มานะครับเนื่องจากภาษาไทยโดนย่อจนเนื้อหาไม่เหลือเลยครับ</div><div class="separator" style="clear: both; text-align: center;"><br /></div><blockquote class="tr_bq" style="clear: both; text-align: center;"><div style="background-color: white; color: #252525; font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin-bottom: 0.5em; margin-top: 0.5em; text-align: start;">ในวิชาคณิตศาสตร์และวิทยการคอมพิวเตอร์ <b>ทฤษกราฟ (Graph Theory) </b>&nbsp;ศึกษาเกี่ยวกับ <b>กราฟ&nbsp;</b><span style="background-color: transparent; line-height: 22.3999996185303px;">ซึ่งมีโครงสร้างทางคณิตศาสตร์ที่ใช้ในการสร้างแบบจำลอง</span><b style="background-color: transparent; line-height: 22.3999996185303px;">ความสัมพันธ์</b><span style="background-color: transparent; line-height: 22.3999996185303px;">ระหว่างวัตถุ "กราฟ" ในที่นี้จะสร้างขึ้นจาก</span><b style="background-color: transparent; line-height: 22.3999996185303px;">จุดยอด&nbsp;</b><span style="background-color: transparent; line-height: 22.3999996185303px;">หรือ </span><b style="background-color: transparent; line-height: 22.3999996185303px;">โหนด</b><span style="background-color: transparent; line-height: 22.3999996185303px;">โดยมีเส้นเชื่อมเรียกว่า</span><b style="background-color: transparent; line-height: 22.3999996185303px;">ขอบ </b><span style="background-color: transparent; line-height: 22.3999996185303px;">ซึ่งกราฟอาจจะไม่เกี่ยวข้องกันคือกราฟไม่มีเส้นเชือมระหว่างจุดยอดทั้งสองจุดในทางกลับกันกราฟที่มีความเกี่ยวข้องกันจะมีขอบเชื่อมโยงสองจุดยอดเข้าด้วยกัน ดู </span><a href="https://en.wikipedia.org/wiki/Graph_(mathematics)" style="background-color: transparent; line-height: 22.3999996185303px;">กราฟ(คณิตศาสตร์)</a><span style="background-color: transparent; line-height: 22.3999996185303px;"> สำหรับคำนิยามเพิ่มเติม</span></div></blockquote><div style="text-align: center;"><a href="https://4.bp.blogspot.com/-BTA1UNKV0v8/U6cNFnVDQzI/AAAAAAAAB44/Pm7k0RDip34/s1600/Facebook-Open-Graph-how+to+use+graph+api+in+facebook,+how+to+call+graph+api+for+search+in+facebook,+how+to+search+by+email+id+in+facebook,+how+to+use+graph+api+explorer+facebook,.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="215" src="https://4.bp.blogspot.com/-BTA1UNKV0v8/U6cNFnVDQzI/AAAAAAAAB44/Pm7k0RDip34/s1600/Facebook-Open-Graph-how+to+use+graph+api+in+facebook,+how+to+call+graph+api+for+search+in+facebook,+how+to+search+by+email+id+in+facebook,+how+to+use+graph+api+explorer+facebook,.png" width="320" /></a></div><div style="text-align: center;"><br /></div><div style="text-align: center;">&nbsp;ซึ่งถ้าเราลองสังเกตดูนะครับ การใช้เฟสบุ๊คจะมีความสัมพันธ์ระหว่างบุคคลเหมือนกราฟที่ได้กล่าวมาข้างต้น จากภาำนะครับ ผู้หญิง ผู้ชายอาหาร spotify และ netflix เป็นจุดยอด เชื่อมต่อกันด้วยขอบ ต่างๆครับ เรามาลองอ่านความสัมพันธ์ดูครับ แล้วจะเข้าใจความหมายมากขึ้น เช่น จุดยอดผู้หญิงเชื่อมต่อหาจุดยอดผู้ชายด้วยขอบเพื่อน อ่านเป็นภาษาไทยก็จะได้ว่า "ผู้หญิงเป็นเพื่อนผู้ชาย" หรือ จุดยอดผู้หญิงเชื่อมต่อหาจุดยอด Netflix ด้วยขอบดู ก็จะแปลว่าผู้หญิงกำลังดู Netflix นั่นเอง</div><div style="text-align: center;"><br /></div><div style="text-align: center;">คราวนี้มาลองเล่นกับ Graph API ของเราบ้างนะครับ</div><div style="text-align: center;">เข้าไปที่&nbsp;<a href="https://developers.facebook.com/tools/explorer">https://developers.facebook.com/tools/explorer</a>&nbsp;เพื่อลองเล่น Graph API กันเลยครับ</div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-vBGYJUJSdvE/VAuyV_SeABI/AAAAAAAAQ8E/XyckSBTtEjE/s1600/api-1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="179" src="https://2.bp.blogspot.com/-vBGYJUJSdvE/VAuyV_SeABI/AAAAAAAAQ8E/XyckSBTtEjE/s1600/api-1.png" width="320" /></a></div><div style="text-align: center;"><br /></div><div style="text-align: center;">ก่อนอื่นครับ ถ้าจะลองเรียกอะไรเราต้องขอสิทธิในการเรียกก่อนครับ เช่น ถ้าผมจะเรียก โพสจากหน้า วอลของผมเอง ต้องขอสิทธิในการเข้าถึง ซึ่งใน Graph Explorer จะทำได้ง่ายมาก (แต่เวลาทำแอปเราต้องเขียนขอสิทธิในฟังก์ชัน FB.login ซึ่งจะพูดถึงในตอนต่อๆไป)&nbsp;</div><div style="text-align: center;"><br /></div><div style="text-align: center;">ลองกดเข้าถึงสิทธิในการอ่านโพสเราครับได้จาก Get Access Token &gt; Extended Persmission &gt; ติ๊ก read_stream และกด Get Access Token</div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-cCgQZEFP8eo/VAuzf4cNR0I/AAAAAAAAQ8M/INt_cUKzHq4/s1600/api-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="179" src="https://4.bp.blogspot.com/-cCgQZEFP8eo/VAuzf4cNR0I/AAAAAAAAQ8M/INt_cUKzHq4/s1600/api-2.png" width="320" /></a></div><div style="text-align: center;"><br /></div><div style="text-align: center;">มันจะเด้งขึ้นมาขอสิทธิ เพื่อให้เราสามารถเข้าไปเล่นสนุกกับข้อมูลส่วนนั้นได้ครับ</div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-LHYxm7SRCDo/VAuz19nddeI/AAAAAAAAQ8U/s3QKM-G6ru4/s1600/api-3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="216" src="https://2.bp.blogspot.com/-LHYxm7SRCDo/VAuz19nddeI/AAAAAAAAQ8U/s3QKM-G6ru4/s1600/api-3.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">สังเกต ตรงช่อง บริเวณกลางจอครับ จะขึ้นดังภาพ</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-G4BrU3HUY0w/VAu0PMPbQ4I/AAAAAAAAQ8c/Bh5Kc541uas/s1600/api-4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="71" src="https://3.bp.blogspot.com/-G4BrU3HUY0w/VAu0PMPbQ4I/AAAAAAAAQ8c/Bh5Kc541uas/s1600/api-4.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">อธิบายครับ</div><div class="separator" style="clear: both; text-align: center;"><span style="color: orange;">/v2.1</span><span style="color: #6aa84f;">/me?</span><span style="color: #3d85c6;">fields=id,name</span></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">/v2.1 คือรุ่นของ Graph API ครับ ซึ่งตอนนี้เดินทางมาถึง รุ่น 2.1 แล้ว</div><div class="separator" style="clear: both; text-align: center;">/me คือจุดยอด หรือ โหนดครับ ซึ่ง /me ในที่นี้คือจุดยอดที่แทนข้อมูลว่า "เรา" ครับ</div><div class="separator" style="clear: both; text-align: center;">?field=id,name คือข้อมูลที่จะเรียกออกมาจุดยอดหรือขอบนั้นครับ ซึ่งในบางจุดยอดจะมีข้อมูลมหาศาลแต่เราต้องการเพียงบางข้อมูลเราสามารถใส่ field เพื่อบอกระบบได้ว่าจะใช้จุดยอดไหนครับ</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">ลองเรียกข้อมูลหน้าวอลดูนะครับ พิมพ์ว่า /v2.1/me/posts</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-B9JlKiEZajs/VAu1qhXuIuI/AAAAAAAAQ8o/vhYaoOYYPhg/s1600/api-5.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="133" src="https://3.bp.blogspot.com/-B9JlKiEZajs/VAu1qhXuIuI/AAAAAAAAQ8o/vhYaoOYYPhg/s1600/api-5.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">จะได้ข้อมูลมาดังนี้ครับ สังเกตนะครับ ถ้ามี /อยู่หลัง โหนด สิ่งนั้นจะเป็นขอบครับ จากตัวอย่างคือ /posts เป็นขอบของ /me ซึ่งดูจาก ข้อมูลที่ออกมาเป็น <a href="https://en.wikipedia.org/wiki/JSON">JSON</a>&nbsp; จะสังเกตว่าในช่อง data-&gt; id จะมี id ประมาณว่า&nbsp;845660548781664_914868131860905 นั่นคือ ไอดีของโพสซึ่งถือว่าเป็นอีกโหนดนะครับ จะได้ความสัมพันธ์ว่า</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-u0QPbkwkk_o/VAu3BMGQDRI/AAAAAAAAQ8w/RErKGb_B_4U/s1600/api-6.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="111" src="https://2.bp.blogspot.com/-u0QPbkwkk_o/VAu3BMGQDRI/AAAAAAAAQ8w/RErKGb_B_4U/s1600/api-6.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;">และเมื่อคลิกที่ id ของโพสและเติม fields=likes&nbsp;จะเห็นว่า มันจะวิ่งตามขอบ likes เพื่อไปดูว่าคนที่ไลค์โพสเรามีใครบ้างครับ</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-oJ5eo0LKbrg/VAu3kzSF5rI/AAAAAAAAQ84/Ivyk2Gb-Wwg/s1600/api-7.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="179" src="https://2.bp.blogspot.com/-oJ5eo0LKbrg/VAu3kzSF5rI/AAAAAAAAQ84/Ivyk2Gb-Wwg/s1600/api-7.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">ความสัมพันธ์ตอนนี้จะเป็นว่า</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-pj5wlnpa8ts/VAu4Uf_tf6I/AAAAAAAAQ9A/YYnPV3_ov40/s1600/api-8.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="149" src="https://4.bp.blogspot.com/-pj5wlnpa8ts/VAu4Uf_tf6I/AAAAAAAAQ9A/YYnPV3_ov40/s1600/api-8.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div style="text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">และเมื่อคลิกที่โหนดเธอมันก็จะขยายออกไปเรื่อยๆ จนเมื่อวนครบทั้งระบบมันจะเป็นสภาพประมาณนี้</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-HXUzW91wVEY/VDthCWGNLcI/AAAAAAAAScw/zhdKyyU7ll8/s1600/e1e5b012.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://3.bp.blogspot.com/-HXUzW91wVEY/VDthCWGNLcI/AAAAAAAAScw/zhdKyyU7ll8/s1600/e1e5b012.jpg" height="180" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">หวังว่าจะได้รับความรู้ไปไม่มากก็น้อยครับ แล้วตอนหน้าเราก็จะเริ่มเขียนแอปให้ดึงข้อมูลจาก Graph API กันแล้วครับ</div><div style="text-align: center;"><br /></div>